if (typeof __decorate !== "function") __decorate = function (decorators, target, key, desc) {
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") return Reflect.decorate(decorators, target, key, desc);
    switch (arguments.length) {
        case 2: return decorators.reduceRight(function(o, d) { return (d && d(o)) || o; }, target);
        case 3: return decorators.reduceRight(function(o, d) { return (d && d(target, key)), void 0; }, void 0);
        case 4: return decorators.reduceRight(function(o, d) { return (d && d(target, key, o)) || o; }, desc);
    }
};
if (typeof __metadata !== "function") __metadata = function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/// <reference path="../typings/tsd.d.ts" />
var angular2_1 = require('angular2/angular2');
var fetchService_1 = require('services/fetchService');
var foodService_1 = require('services/foodService');
var positifPipe_1 = require('pipes/positifPipe');
var loginValidators_1 = require('validators/loginValidators');
var App = (function () {
    function App(fetchService, foodService, customValidators) {
        var _this = this;
        this.foodService = foodService;
        this.foodList = this.foodService.getFood();
        this.caloriesCount = this.foodService.getCaloriesCount();
        this.caloriesNeed = this.foodService.getCaloriesNeed();
        fetchService.loadFoods().then(function (response) {
            _this.foods = response;
        }, function (response) {
            console.warn("foods loading failed (it should, file doesnt exist)");
        });
        this.imcForm = new angular2_1.ControlGroup({
            taille: new angular2_1.Control("", customValidators.taille),
            age: new angular2_1.Control("", customValidators.age),
            masse: new angular2_1.Control("", customValidators.masse)
        });
    }
    App.prototype.addFood = function (event, aliment, poids) {
        event.preventDefault();
        for (var i = 0; i < this.foods.length; i++) {
            if (this.foods[i].name.indexOf(aliment.value) != -1) {
                this.foodService.addFood(this.foods[i].name, this.foods[i].calories, poids.value);
                break;
            }
        }
        ;
        this.caloriesCount = this.foodService.getCaloriesCount();
        aliment.value = "";
        poids.value = "";
    };
    App.prototype.deleteFood = function (event, index, food) {
        event.preventDefault();
        this.foodService.deleteFood(index, food.calories);
        this.caloriesCount = this.foodService.getCaloriesCount();
    };
    App.prototype.getCaloriesNeed = function (event, taille, masse, age) {
        event.preventDefault();
        if (this.imcForm.valid) {
            if (document.getElementById('homme').checked) {
                var sexe = "homme";
            }
            else {
                var sexe = "femme";
            }
            this.caloriesNeed = this.foodService.getCaloriesNeed(masse.value, taille.value, age.value, sexe);
        }
        else {
            console.log(this.imcForm);
        }
    };
    App = __decorate([
        angular2_1.Component({
            selector: 'app',
            appInjector: [fetchService_1.FetchService, foodService_1.FoodService, loginValidators_1.CustomValidators]
        }),
        angular2_1.View({
            templateUrl: "templates/main.html",
            directives: [angular2_1.NgFor, angular2_1.NgIf, angular2_1.formDirectives]
        }), 
        __metadata('design:paramtypes', [fetchService_1.FetchService, foodService_1.FoodService, loginValidators_1.CustomValidators])
    ], App);
    return App;
})();
exports.pipes = Object.assign({}, angular2_1.defaultPipes, {
    positif: [
        new positifPipe_1.PositifPipe()
    ]
});
angular2_1.bootstrap(App, angular2_1.bind(angular2_1.PipeRegistry).toValue(new angular2_1.PipeRegistry(exports.pipes)));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC50cyJdLCJuYW1lcyI6WyJBcHAiLCJBcHAuY29uc3RydWN0b3IiLCJBcHAuYWRkRm9vZCIsIkFwcC5kZWxldGVGb29kIiwiQXBwLmdldENhbG9yaWVzTmVlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxBQUNBLDRDQUQ0QztBQUM1Qyx5QkFBMkksbUJBQW1CLENBQUMsQ0FBQTtBQUMvSiw2QkFBMkIsdUJBQXVCLENBQUMsQ0FBQTtBQUNuRCw0QkFBMEIsc0JBQXNCLENBQUMsQ0FBQTtBQUNqRCw0QkFBMEIsbUJBQW1CLENBQUMsQ0FBQTtBQUM5QyxnQ0FBK0IsNEJBQTRCLENBQUMsQ0FBQTtBQUc1RDtJQWdCRUEsYUFBWUEsWUFBMEJBLEVBQUVBLFdBQXlCQSxFQUFFQSxnQkFBa0NBO1FBaEJ2R0MsaUJBOEVDQTtRQTVER0EsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsV0FBV0EsQ0FBQ0E7UUFDL0JBLElBQUlBLENBQUNBLFFBQVFBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO1FBQzNDQSxJQUFJQSxDQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxnQkFBZ0JBLEVBQUVBLENBQUNBO1FBQ3pEQSxJQUFJQSxDQUFDQSxZQUFZQSxHQUFHQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxlQUFlQSxFQUFFQSxDQUFDQTtRQUV2REEsWUFBWUEsQ0FBQ0EsU0FBU0EsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBQUEsUUFBUUE7WUFDcENBLEtBQUlBLENBQUNBLEtBQUtBLEdBQUdBLFFBQVFBLENBQUNBO1FBQ3hCQSxDQUFDQSxFQUFFQSxVQUFBQSxRQUFRQTtZQUNUQSxPQUFPQSxDQUFDQSxJQUFJQSxDQUFDQSxxREFBcURBLENBQUNBLENBQUNBO1FBQ3RFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVIQSxJQUFJQSxDQUFDQSxPQUFPQSxHQUFHQSxJQUFJQSx1QkFBWUEsQ0FBQ0E7WUFDOUJBLE1BQU1BLEVBQUVBLElBQUlBLGtCQUFPQSxDQUFDQSxFQUFFQSxFQUFFQSxnQkFBZ0JBLENBQUNBLE1BQU1BLENBQUNBO1lBQ2hEQSxHQUFHQSxFQUFFQSxJQUFJQSxrQkFBT0EsQ0FBQ0EsRUFBRUEsRUFBRUEsZ0JBQWdCQSxDQUFDQSxHQUFHQSxDQUFDQTtZQUMxQ0EsS0FBS0EsRUFBRUEsSUFBSUEsa0JBQU9BLENBQUNBLEVBQUVBLEVBQUVBLGdCQUFnQkEsQ0FBQ0EsS0FBS0EsQ0FBQ0E7U0FDL0NBLENBQUNBLENBQUNBO0lBQ0xBLENBQUNBO0lBRURELHFCQUFPQSxHQUFQQSxVQUFRQSxLQUFLQSxFQUFFQSxPQUFPQSxFQUFFQSxLQUFLQTtRQUMzQkUsS0FBS0EsQ0FBQ0EsY0FBY0EsRUFBRUEsQ0FBQ0E7UUFFckJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBO1lBQzNDQSxFQUFFQSxDQUFBQSxDQUFFQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFBQSxDQUFDQTtnQkFDbkRBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLEVBQUVBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLFFBQVFBLEVBQUVBLEtBQUtBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO2dCQUNsRkEsS0FBS0EsQ0FBQ0E7WUFDUkEsQ0FBQ0E7UUFDSEEsQ0FBQ0E7UUFBQUEsQ0FBQ0E7UUFFRkEsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsZ0JBQWdCQSxFQUFFQSxDQUFDQTtRQUV6REEsT0FBT0EsQ0FBQ0EsS0FBS0EsR0FBR0EsRUFBRUEsQ0FBQ0E7UUFDbkJBLEtBQUtBLENBQUNBLEtBQUtBLEdBQUdBLEVBQUVBLENBQUNBO0lBQ3JCQSxDQUFDQTtJQUdERix3QkFBVUEsR0FBVkEsVUFBV0EsS0FBS0EsRUFBRUEsS0FBS0EsRUFBRUEsSUFBSUE7UUFDM0JHLEtBQUtBLENBQUNBLGNBQWNBLEVBQUVBLENBQUNBO1FBQ3ZCQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxVQUFVQSxDQUFDQSxLQUFLQSxFQUFFQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtRQUNsREEsSUFBSUEsQ0FBQ0EsYUFBYUEsR0FBR0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsZ0JBQWdCQSxFQUFFQSxDQUFDQTtJQUMzREEsQ0FBQ0E7SUFJQ0gsNkJBQWVBLEdBQWZBLFVBQWdCQSxLQUFLQSxFQUFFQSxNQUFNQSxFQUFFQSxLQUFLQSxFQUFFQSxHQUFHQTtRQUN2Q0ksS0FBS0EsQ0FBQ0EsY0FBY0EsRUFBRUEsQ0FBQ0E7UUFFekJBLEVBQUVBLENBQUFBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1lBQ3RCQSxFQUFFQSxDQUFDQSxDQUFDQSxRQUFRQSxDQUFDQSxjQUFjQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDN0NBLElBQUlBLElBQUlBLEdBQUdBLE9BQU9BLENBQUNBO1lBQ3JCQSxDQUFDQTtZQUNEQSxJQUFJQSxDQUFDQSxDQUFDQTtnQkFDSkEsSUFBSUEsSUFBSUEsR0FBR0EsT0FBT0EsQ0FBQ0E7WUFDckJBLENBQUNBO1lBRURBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLGVBQWVBLENBQUNBLEtBQUtBLENBQUNBLEtBQUtBLEVBQUVBLE1BQU1BLENBQUNBLEtBQUtBLEVBQUVBLEdBQUdBLENBQUNBLEtBQUtBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1FBQ25HQSxDQUFDQTtRQUNEQSxJQUFJQSxDQUFBQSxDQUFDQTtZQUNIQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFBQTtRQUMzQkEsQ0FBQ0E7SUFDSEEsQ0FBQ0E7SUE3RUhKO1FBQUNBLG9CQUFTQSxDQUFDQTtZQUNUQSxRQUFRQSxFQUFFQSxLQUFLQTtZQUNmQSxXQUFXQSxFQUFFQSxDQUFDQSwyQkFBWUEsRUFBRUEseUJBQVdBLEVBQUVBLGtDQUFnQkEsQ0FBQ0E7U0FDM0RBLENBQUNBO1FBQ0RBLGVBQUlBLENBQUNBO1lBQ0pBLFdBQVdBLEVBQUVBLHFCQUFxQkE7WUFDbENBLFVBQVVBLEVBQUVBLENBQUNBLGdCQUFLQSxFQUFFQSxlQUFJQSxFQUFFQSx5QkFBY0EsQ0FBQ0E7U0FDMUNBLENBQUNBOztZQXVFREE7SUFBREEsVUFBQ0E7QUFBREEsQ0E5RUEsQUE4RUNBLElBQUE7QUFFVSxhQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsdUJBQVksRUFBRTtJQUNqRCxPQUFPLEVBQUU7UUFDUCxJQUFJLHlCQUFXLEVBQUU7S0FDbEI7Q0FDRixDQUFDLENBQUM7QUFFSCxvQkFBUyxDQUFDLEdBQUcsRUFBRSxlQUFJLENBQUMsdUJBQVksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLHVCQUFZLENBQUMsYUFBSyxDQUFDLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cclxuaW1wb3J0IHtDb21wb25lbnQsIFZpZXcsIGJvb3RzdHJhcCwgTmdGb3IsIE5nSWYsIGRlZmF1bHRQaXBlcywgUGlwZVJlZ2lzdHJ5LCBiaW5kLCBmb3JtRGlyZWN0aXZlcywgQ29udHJvbEdyb3VwLCBDb250cm9sLCBWYWxpZGF0b3JzfSBmcm9tICdhbmd1bGFyMi9hbmd1bGFyMic7XHJcbmltcG9ydCB7RmV0Y2hTZXJ2aWNlfSBmcm9tICdzZXJ2aWNlcy9mZXRjaFNlcnZpY2UnO1xyXG5pbXBvcnQge0Zvb2RTZXJ2aWNlfSBmcm9tICdzZXJ2aWNlcy9mb29kU2VydmljZSc7XHJcbmltcG9ydCB7UG9zaXRpZlBpcGV9IGZyb20gJ3BpcGVzL3Bvc2l0aWZQaXBlJztcclxuaW1wb3J0IHtDdXN0b21WYWxpZGF0b3JzfSBmcm9tICd2YWxpZGF0b3JzL2xvZ2luVmFsaWRhdG9ycyc7XHJcblxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdhcHAnLFxyXG4gIGFwcEluamVjdG9yOiBbRmV0Y2hTZXJ2aWNlLCBGb29kU2VydmljZSwgQ3VzdG9tVmFsaWRhdG9yc11cclxufSlcclxuQFZpZXcoe1xyXG4gIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9tYWluLmh0bWxcIixcclxuICBkaXJlY3RpdmVzOiBbTmdGb3IsIE5nSWYsIGZvcm1EaXJlY3RpdmVzXVxyXG59KVxyXG5jbGFzcyBBcHAge1xyXG4gIGZvb2RzOiBBcnJheTxPYmplY3Q+O1xyXG4gIGZvb2RMaXN0OiBBcnJheTxPYmplY3Q+O1xyXG4gIGNhbG9yaWVzQ291bnQ6IE51bWJlcjtcclxuICBjYWxvcmllc05lZWQ6IE51bWJlcjtcclxuICBmb29kU2VydmljZSA6IEZvb2RTZXJ2aWNlO1xyXG4gIGltY0Zvcm06IENvbnRyb2xHcm91cDtcclxuXHJcbiAgY29uc3RydWN0b3IoZmV0Y2hTZXJ2aWNlOiBGZXRjaFNlcnZpY2UsIGZvb2RTZXJ2aWNlIDogRm9vZFNlcnZpY2UsIGN1c3RvbVZhbGlkYXRvcnM6IEN1c3RvbVZhbGlkYXRvcnMpIHtcclxuXHJcbiAgICB0aGlzLmZvb2RTZXJ2aWNlID0gZm9vZFNlcnZpY2U7XHJcbiAgICB0aGlzLmZvb2RMaXN0ID0gdGhpcy5mb29kU2VydmljZS5nZXRGb29kKCk7XHJcbiAgICB0aGlzLmNhbG9yaWVzQ291bnQgPSB0aGlzLmZvb2RTZXJ2aWNlLmdldENhbG9yaWVzQ291bnQoKTtcclxuICAgIHRoaXMuY2Fsb3JpZXNOZWVkID0gdGhpcy5mb29kU2VydmljZS5nZXRDYWxvcmllc05lZWQoKTtcclxuXHJcbiAgICBmZXRjaFNlcnZpY2UubG9hZEZvb2RzKCkudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgIHRoaXMuZm9vZHMgPSByZXNwb25zZTtcclxuICAgIH0sIHJlc3BvbnNlID0+IHtcclxuICAgICAgY29uc29sZS53YXJuKFwiZm9vZHMgbG9hZGluZyBmYWlsZWQgKGl0IHNob3VsZCwgZmlsZSBkb2VzbnQgZXhpc3QpXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5pbWNGb3JtID0gbmV3IENvbnRyb2xHcm91cCh7XHJcbiAgICAgIHRhaWxsZTogbmV3IENvbnRyb2woXCJcIiwgY3VzdG9tVmFsaWRhdG9ycy50YWlsbGUpLCAvLyBjdXN0b20gdmFsaWRhdG9yXHJcbiAgICAgIGFnZTogbmV3IENvbnRyb2woXCJcIiwgY3VzdG9tVmFsaWRhdG9ycy5hZ2UpLCAvLyBjdXN0b20gdmFsaWRhdG9yXHJcbiAgICAgIG1hc3NlOiBuZXcgQ29udHJvbChcIlwiLCBjdXN0b21WYWxpZGF0b3JzLm1hc3NlKSAvLyBjdXN0b20gdmFsaWRhdG9yXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEZvb2QoZXZlbnQsIGFsaW1lbnQsIHBvaWRzKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmZvb2RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYoIHRoaXMuZm9vZHNbaV0ubmFtZS5pbmRleE9mKGFsaW1lbnQudmFsdWUpICE9IC0xKXtcclxuICAgICAgICAgIHRoaXMuZm9vZFNlcnZpY2UuYWRkRm9vZCh0aGlzLmZvb2RzW2ldLm5hbWUsIHRoaXMuZm9vZHNbaV0uY2Fsb3JpZXMsIHBvaWRzLnZhbHVlKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMuY2Fsb3JpZXNDb3VudCA9IHRoaXMuZm9vZFNlcnZpY2UuZ2V0Q2Fsb3JpZXNDb3VudCgpO1xyXG4gICAgXHJcbiAgICAgIGFsaW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICBwb2lkcy52YWx1ZSA9IFwiXCI7XHJcbiAgfVxyXG5cclxuXHJcbiAgZGVsZXRlRm9vZChldmVudCwgaW5kZXgsIGZvb2QpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB0aGlzLmZvb2RTZXJ2aWNlLmRlbGV0ZUZvb2QoaW5kZXgsIGZvb2QuY2Fsb3JpZXMpO1xyXG4gICAgdGhpcy5jYWxvcmllc0NvdW50ID0gdGhpcy5mb29kU2VydmljZS5nZXRDYWxvcmllc0NvdW50KCk7XHJcbiAgfVxyXG5cclxuXHJcbiBcclxuICAgIGdldENhbG9yaWVzTmVlZChldmVudCwgdGFpbGxlLCBtYXNzZSwgYWdlKXtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZih0aGlzLmltY0Zvcm0udmFsaWQpIHsgLy8gcmV0dXJuIHRydWUgb3IgZmFsc2UsIGRlcGVuZGluZyBvbiB0aGUgZm9ybSBzdGF0ZVxyXG4gICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hvbW1lJykuY2hlY2tlZCkge1xyXG4gICAgICAgIHZhciBzZXhlID0gXCJob21tZVwiO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHZhciBzZXhlID0gXCJmZW1tZVwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLmNhbG9yaWVzTmVlZCA9IHRoaXMuZm9vZFNlcnZpY2UuZ2V0Q2Fsb3JpZXNOZWVkKG1hc3NlLnZhbHVlLCB0YWlsbGUudmFsdWUsIGFnZS52YWx1ZSwgc2V4ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmltY0Zvcm0pXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIHBpcGVzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFBpcGVzLCB7XHJcbiAgcG9zaXRpZjogW1xyXG4gICAgbmV3IFBvc2l0aWZQaXBlKClcclxuICBdXHJcbn0pO1xyXG5cclxuYm9vdHN0cmFwKEFwcCwgYmluZChQaXBlUmVnaXN0cnkpLnRvVmFsdWUobmV3IFBpcGVSZWdpc3RyeShwaXBlcykpKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9